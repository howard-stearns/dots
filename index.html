<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">    
    <link rel="stylesheet" href="./style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <script src='https://hifi-spatial-audio-api.s3-us-west-2.amazonaws.com/releases/latest/HighFidelityAudio-latest.js'></script>
    <!-- USE THIS IF YOU ARE GOING TO GENERATE A JWT IN index.js:
         <script src="https://kjur.github.io/jsrsasign/jsrsasign-latest-all-min.js">
     -->

</script>
  </head>
  <body>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> 
    <div id="rooms">
      <p>Click on a room to speak with others there:</p>

      <room id="bcd48bdf-9a3b-4aec-9dd6-93b10d472318">
        <a href="#">Battery</a>
        <concurrency>0</concurrency> currently
      </room>
      <room id="276015f3-889c-4578-8afa-d12edcd0cb6b">
        <a href="#">Folsom</a>
        <concurrency>0</concurrency> currently
      </room>
      <room id="e578120d-328c-42ba-a126-7c36b0399fd8">
        <a href="#">Langton</a>
        <concurrency>0</concurrency> currently
      </room>
      <room id="TheLobby">Total <total id="totalConcurrency">0</total>, including
        <concurrency>0</concurrency> here in <a>the lobby</a>
      </room>

      <p>You will be asked to allow this app to use your microphone, which is the whole point.</p>
      <p>When you get there, everything is drag and drop:
        <ul>
          <li>Drag your dot to move.</li>
          <li>Drag in an mp3 to play it from that position, and anyone can drag it around afterwords. Gets deleted when you leave.</li>
          <li>Drag an image to be the background (for everyone).</li>
          <li>Drag an image onto yourself or anyone's music to be the image.</li>
          <li><strike>Twist/arrows to change your direction.</strike></li>
        </ul>
        (You can also select an audio or image file by clicking your dot, without dragging.)
      </p>
      <p>
        Beginning several seconds after you speak in a room, you can kick out anyone in that room. You get kicked back here to the lobby (where there is no speaking), and you can rejoin the room, but beware that people can kick you before you have a chance to disrupt.
      </p>
      <p>This is all done in less than 500 lines of pure Javascript, with no frameworks, and is inspectable in this codepen.</p>
    </div>
    <template id="mapTemplate">
      <map>
        <h2>Space...</h2>
      </map>
    </template>
    <template id="avatarTemplate">
      <avatar>
        <volume></volume>
        <picture>
          <nameDisplay></nameDisplay>
          <self class="hidden">you <i class="material-icons">open_with</i></self>
          <button class="disabled"><i class="material-icons">delete_forever</i></button>
          <countdown><span></span>'till user can kick</countdown>
        </picture>
      </avatar>
    </template>
    <input type="file" id="filePicker" class="hidden"></input>
    <audio autoplay id="player" class="hidden"></audio>

    <script src='https://croquet.studio/sdk/croquet-latest.min.js'></script>
    <script src='./index.js'></script>
  </body>
</html>
